<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Santa-ful X-mas{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% block extra_css %}{% endblock %}
    <style>
        /* Snowflakes container */
        .snowflakes-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
            overflow: hidden;
        }

        .snowflake {
            position: absolute;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.5rem;
            animation: fall linear infinite;
            opacity: 0.7;
            user-select: none;
        }

        @keyframes fall {
            0% {
                transform: translateY(-100px) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(100vh) translateX(50px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Cursor sparkles */
        .cursor-sparkle {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 215, 0, 0.8);
            pointer-events: none;
            z-index: 9999;
            animation: sparkleFade 1s ease-out forwards;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
        }

        @keyframes sparkleFade {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }
    </style>
</head>
<body>
    <!-- Snowflakes Background -->
    <div class="snowflakes-container" id="snowflakesContainer"></div>
    
    <div class="app-container">
        <!-- Top Progress Bar -->
        <div class="progress-bar-container">
            {% block progress_bar %}{% endblock %}
        </div>
        
        <!-- Main Content Area -->
        <div class="main-content-area">
            {% block content %}{% endblock %}
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        // Snowflakes animation - runs continuously
        (function() {
            const snowflakesContainer = document.getElementById('snowflakesContainer');
            const snowflakeSymbols = ['❄', '❅', '❆', '✻', '✼'];
            let snowflakeCount = 0;
            const maxSnowflakes = 50;

            function createSnowflake() {
                if (snowflakeCount >= maxSnowflakes) return;
                
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.textContent = snowflakeSymbols[Math.floor(Math.random() * snowflakeSymbols.length)];
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                snowflake.style.animationDelay = Math.random() * 2 + 's';
                snowflake.style.fontSize = (Math.random() * 0.5 + 1) + 'rem';
                
                snowflakesContainer.appendChild(snowflake);
                snowflakeCount++;

                // Remove snowflake after animation
                setTimeout(() => {
                    if (snowflake.parentNode) {
                        snowflake.remove();
                        snowflakeCount--;
                    }
                }, 5000);
            }

            // Create initial snowflakes
            for (let i = 0; i < 30; i++) {
                setTimeout(() => createSnowflake(), i * 200);
            }

            // Continuously create new snowflakes
            setInterval(() => {
                if (snowflakeCount < maxSnowflakes) {
                    createSnowflake();
                }
            }, 300);
        })();

        // Cursor sparkles - follow mouse movement
        (function() {
            let sparkleTrail = [];
            const maxSparkles = 20;

            document.addEventListener('mousemove', function(e) {
                // Create sparkle at cursor position
                const sparkle = document.createElement('div');
                sparkle.className = 'cursor-sparkle';
                sparkle.style.left = e.clientX + 'px';
                sparkle.style.top = e.clientY + 'px';
                
                // Random sparkle color
                const colors = [
                    'rgba(255, 215, 0, 0.8)', // Gold
                    'rgba(255, 255, 255, 0.8)', // White
                    'rgba(173, 216, 230, 0.8)', // Light blue
                    'rgba(255, 192, 203, 0.8)'  // Pink
                ];
                sparkle.style.background = colors[Math.floor(Math.random() * colors.length)];
                sparkle.style.boxShadow = `0 0 10px ${sparkle.style.background}`;
                
                document.body.appendChild(sparkle);
                sparkleTrail.push(sparkle);

                // Limit number of sparkles
                if (sparkleTrail.length > maxSparkles) {
                    const oldSparkle = sparkleTrail.shift();
                    if (oldSparkle && oldSparkle.parentNode) {
                        oldSparkle.remove();
                    }
                }

                // Remove sparkle after animation
                setTimeout(() => {
                    if (sparkle.parentNode) {
                        sparkle.remove();
                        const index = sparkleTrail.indexOf(sparkle);
                        if (index > -1) {
                            sparkleTrail.splice(index, 1);
                        }
                    }
                }, 1000);
            });
        })();
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>

